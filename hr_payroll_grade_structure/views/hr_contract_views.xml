<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- HR Contract Form View Extension -->
    <record id="view_hr_contract_form_inherit" model="ir.ui.view">
        <field name="name">hr.contract.form.inherit</field>
        <field name="model">hr.contract</field>
        <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
        <field name="arch" type="xml">
        
            <xpath expr="//field[@name='wage']" position="attributes">
                <attribute name="readonly">salary_grade_id</attribute>
            </xpath>

            <xpath expr="//header" position="after">
                <field name="is_salary_applied" invisible="1"/>
                <div class="alert alert-warning" invisible="is_salary_applied or not salary_grade_id or not grade_level_id" style="margin: 16px;">
                    <i class="fa fa-exclamation-triangle"/> 
                    <strong>Warning:</strong> Please click "Apply Salary Structure" to update the salary details.
                </div>
            </xpath>
            
            <xpath expr="//header" position="inside">
                <button name="apply_salary_structure" 
                        type="object" 
                        string="Apply Salary Structure" 
                        class="btn-primary"
                        invisible="not salary_grade_id or not grade_level_id"
                        help="Click to apply the selected salary structure to this contract"/>

            </xpath>
        
            <xpath expr="//group[@name='salary']" position="after">
                <separator string="Salary Grade Structure" colspan="2"/>
                <group colspan="2" col="4">
                    <field name="salary_grade_id" options="{'no_create': True}"/>
                    <field name="grade_level_id" 
                           options="{'no_create': True}"
                           required="salary_grade_id"
                           domain="[('salary_grade_id', '=', salary_grade_id)]"/>
                    <field name="basic_salary" 
                           widget="monetary" 
                           options="{'currency_field': 'currency_id'}"
                           readonly="1"
                           invisible="not salary_grade_id or not grade_level_id"/>
                    <field name="allowances" 
                           widget="monetary" 
                           options="{'currency_field': 'currency_id'}"
                           readonly="1"
                           invisible="not salary_grade_id or not grade_level_id"/>
                </group>

            </xpath>
        </field>
    </record>
</odoo>
